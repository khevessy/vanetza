<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Socktap - Vanetza - Your open-source ETSI C-ITS protocol stack</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link href="../../css/extra.css" rel="stylesheet" />
        <link href="../../css/tango.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Socktap";
        var mkdocs_page_input_path = "tools/socktap.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]--> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
<div class="logo">
    <img src="../../img/logo.png" alt="Vanetza - Your open-source ETSI C-ITS protocol stack" />
</div>
<div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Overview</a>
    <ul>
    <li class="toctree-l2"><a class="reference internal" href="../..#project-layout">Project layout</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../..#deployments">Deployments</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../api/">API Documentation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../how-to-build/">How to build</a>
    <ul>
    <li class="toctree-l2"><a class="reference internal" href="../../how-to-build/#prerequisites">Prerequisites</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../how-to-build/#compilation">Compilation</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../how-to-build/#unit-tests">Unit tests</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../how-to-build/#integrating-vanetza">Integrating Vanetza</a>
    </li>
    </ul>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Recipes</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../recipes/autotalks-sdk-build/">Building for Autotalks devices</a>
    <ul>
    <li class="toctree-l2"><a class="reference internal" href="../../recipes/autotalks-sdk-build/#autotalks-sdk">Autotalks SDK</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="../../recipes/autotalks-sdk-build/#code-corrections">Code corrections</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../recipes/autotalks-sdk-build/#vanetza-build-dependencies">Vanetza build dependencies</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../recipes/autotalks-sdk-build/#compile-vanetza">Compile Vanetza</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="../../recipes/autotalks-sdk-build/#compiling-for-craton">Compiling for Craton</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="../../recipes/autotalks-sdk-build/#compiling-for-secton">Compiling for Secton</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../recipes/cohda-sdk-build/">Building for Cohda MK5</a>
    <ul>
    <li class="toctree-l2"><a class="reference internal" href="../../recipes/cohda-sdk-build/#cohda-sdk">Cohda SDK</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../recipes/cohda-sdk-build/#vanetza-build-dependencies">Vanetza build dependencies</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../recipes/cohda-sdk-build/#compile-vanetza">Compile Vanetza</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../recipes/cohda-sdk-build/#deployment">Deployment</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../recipes/cross-compile-dependencies/">Cross-Compilation of Dependencies</a>
    <ul>
    <li class="toctree-l2"><a class="reference internal" href="../../recipes/cross-compile-dependencies/#boost">Boost</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../recipes/cross-compile-dependencies/#crypto">Crypto++</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../recipes/cross-compile-dependencies/#geographiclib">GeographicLib</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../recipes/cube-evk-build/">Running socktap on nfiniity devices</a>
    <ul>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Tools</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../benchmark/">Benchmark</a>
    <ul>
    <li class="toctree-l2"><a class="reference internal" href="../benchmark/#installation">Installation</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../benchmark/#running">Running</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../benchmark/#acknowledgement">Acknowledgement</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../certify/">Certify</a>
    <ul>
    <li class="toctree-l2"><a class="reference internal" href="../certify/#installation">Installation</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../certify/#pki-setup">PKI Setup</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="../certify/#generating-keys">Generating Keys</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="../certify/#generating-root-certificates">Generating Root Certificates</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="../certify/#generating-authorization-authorities">Generating Authorization Authorities</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="../certify/#generating-authorization-tickets">Generating Authorization Tickets</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../certify/#other-options">Other Options</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../certify/#acknowledgement">Acknowledgement</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Socktap</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#link-layer">Link layer</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#ethernet">Ethernet</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#cube-evk">CUBE-EVK</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#cohda">Cohda</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#autotalks">Autotalks</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#udp">UDP</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#tcp">TCP</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#positioning">Positioning</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#applications">Applications</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#building-and-running">Building and Running</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#build-options">Build options</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#first-steps">First steps</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#acknowledgement">Acknowledgement</a>
    </li>
    </ul>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../legal/">Legal Notice</a>
    <ul>
    <li class="toctree-l2"><a class="reference internal" href="../../legal/#contact">Contact</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="../../legal/#privacy-statement">Privacy Statement</a>
    </li>
    </ul>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Vanetza - Your open-source ETSI C-ITS protocol stack</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
          <li>Tools &raquo;</li>
      <li class="breadcrumb-item active">Socktap</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/riebl/vanetza/edit/master/docs/tools/socktap.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="socktap">Socktap</h1>
<p><em>socktap</em> is an example application demonstrating API usage of Vanetza libraries.
You can run this demo application on commodity hardware, i.e. no special V2X or Car2X hardware is required.
If you have an IEEE 802.11p compatible network interface card, though, socktap can also communicate with other ITS-G5 stations.</p>
<p>Consider <em>socktap</em> as an experimental application showcasing some of Vanetza&rsquo;s features but not as a full-grown ITS-G5 station.
However, <em>socktap</em> may be the starting point for your custom application.
Just keep in mind that Vanetza supports more features than those integrated in <em>socktap</em>.
For example, <em>socktap</em> omits <em>Decentralized Congestion Control</em> (DCC) entirely though Vanetza supports this feature.</p>
<h2 id="link-layer">Link layer</h2>
<p>At the moment, six link layer implementations exist for <em>socktap</em>.
You can choose via the <code>--link-layer</code> argument which implementation to use:</p>
<ul>
<li><em>ethernet</em> runs on Linux raw packet sockets</li>
<li><em>cube-evk</em> runs nfiniity&rsquo;s link-layer implementation for the cube-evk</li>
<li><em>autotalks</em> uses the Autotalks API to run on Autotalks hardware</li>
<li><em>cohda</em> employs Cohda&rsquo;s LLC API</li>
<li><em>udp</em> runs GeoNetworking on top of IP/UDP multicast sockets</li>
<li><em>tcp</em> runs GeoNetworking on top of IP/TCP sockets</li>
</ul>
<h3 id="ethernet">Ethernet</h3>
<p>The <em>ethernet</em> variant has been initially <em>socktap</em>&rsquo;s only available link-layer implementation.
In this mode, <em>socktap</em> will send and receiver Ethernet frames on the specified network interface (see <code>--interface</code> argument).</p>
<p>Please be aware that <em>socktap</em> needs special privileges to access the raw sockets.
Either run <em>socktap</em> as root user or set the <code>CAP_NET_RAW</code> capabilities on the <em>socktap</em> executable.
You can do this via <code>sudo setcap cap_net_raw+ep bin/socktap</code>.
When <code>CAP_NET_RAW</code> is attached to the <em>socktap</em> binary you can run it as an ordinary user.</p>
<h3 id="cube-evk">CUBE-EVK</h3>
<p>If you have access to a cube-evk from <a href="https://www.nfiniity.com/#portfolio">nfiniity</a> you can use socktap on your personal computer and connect to the EVK. In this mode the EVK is used as wireless remote radio. Moreover, you can use socktap on the EVK natively as well. Please refer to our <a href="../../recipes/cube-evk-build/">Running socktap on nfiniity devices</a> for more details.</p>
<h3 id="cohda">Cohda</h3>
<p>If you have access to V2X hardware from Cohda Wireless, you can also run <em>socktap</em> on their units.
In the <em>cohda</em> mode, <em>socktap</em> uses Cohda&rsquo;s LLC API for sending and receiving data frames.
This mode is similar to <em>ethernet</em> but depends on the Cohda SDK.
Please refer to our <a href="../../recipes/cohda-sdk-build/">Cohda SDK building recipe</a> for details.</p>
<h3 id="autotalks">Autotalks</h3>
<p>Another option involving dedicated V2X hardware uses the Autotalks API.
Please have a look at our <a href="../../recipes/autotalks-sdk-build/">Building for Autotalks devices</a> guide how to incorporate the Autotalks SDK.</p>
<h3 id="udp">UDP</h3>
<p>A relatively new addition is the <em>udp</em> mode, which allows running <em>socktap</em> without any privileges.
GeoNetworking packets are wrapped into UDP datagrams and sent to the IP multicast group <strong>239.118.122.97</strong> on UDP port <strong>8947</strong>.
Further <em>socktap</em> instances within the same IP multicast network exchange GeoNetworking packets then.
You can consider this as &ldquo;GeoNetworking over IP/UDP&rdquo;.</p>
<h3 id="tcp">TCP</h3>
<p>The TCP implementation is similiar to the UDP one.
However, TCP adds the arguments <code>--tcp-accept</code> and <code>--tcp-connect</code>, which allow the user to accept incoming TCP connections or connect to open TCP sockets, respectively.
Both arguments expect a comma separated list of <code>ip:port</code>.
Outgoing GeoNetworking packets will then be sent to all active TCP connections.</p>
<h2 id="positioning">Positioning</h2>
<p>Many components of an ITS-G5 system depend on positioning data.
Ideally, you have a GPS receiver attached to the computer running <a href="http://catb.org/gpsd">gpsd</a> along with <em>socktap</em>.
If you do not have a GPS receiver or no GPS signal in your environment, you can also set a static position manually.</p>
<p>The <code>--positioning</code> argument controls if <em>gpsd</em> provides live GPS position fixes or if socktap shall use a <em>static</em> position fix.
See also the <code>--latitude</code> and <code>--longitude</code> arguments for the latter option.</p>
<h2 id="applications">Applications</h2>
<p>Earlier, multiple variants of <em>socktap</em> existed as separate executables.
Nowadays, <em>socktap</em> is the unified executable which can be configured in many ways.
These configuration options substitute the deprecated executables.</p>
<p>You can choose from three simple example V2X applications to run with <em>socktap</em> via the <code>--applications</code> argument:</p>
<ul>
<li><em>ca</em> sends Cooperative Awareness Messages (CAM)</li>
<li><em>hello</em> sends simple BTP-B message with the binary payload <code>0xc0ffee</code></li>
<li><em>benchmark</em> counts the number of any received messages and prints the current message rate once per second</li>
</ul>
<h2 id="building-and-running">Building and Running</h2>
<p>You need to enable the CMake option <code>BUILD_SOCKTAP</code> so <em>socktap</em> will be built at all.
Two further CMake options control which optional features are included into the <em>socktap</em> executable.</p>
<h3 id="build-options">Build options</h3>
<p>First, the option <code>SOCKTAP_WITH_COHDA_LLC</code> enables the link-layer variant for operation on Cohda V2X devices.
This option usually makes only sense if you are cross-compiling <em>socktap</em> for a Cohda device.</p>
<p>If CMake finds <em>gpsd</em> on your system, the option <code>SOCKTAP_WITH_GPSD</code> is enabled by default.
The integration of GPS receivers depends on this option.
If this option is disabled, you can only configure static positions with <em>socktap</em>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>A bug in gpsd&lt;=3.15 causes a segmentation fault when <em>socktap</em> tries to fetch GPS data.
More recent versions include a bugfix, e.g. gpsd&gt;=3.17 is known to work.
See also the corresponding <a href="https://github.com/riebl/vanetza/issues/69">issue ticket #69</a>.</p>
</div>
<h3 id="first-steps">First steps</h3>
<p>You can locate <em>socktap</em> in your build directory at <strong>bin/socktap</strong>.
Run this executable with <code>--help</code> appended to see the list of available runtime configuration options.
With the <em>ethernet</em> link-layer you should specify the network device on which <em>socktap</em> should send and receive packets via <code>--interface</code>.
Usually, such devices are named <em>eth0</em> or <em>wlan0</em>. You can look up the available devices on your machine with the <code>ip link</code> command.</p>
<p>If you want to use the local loopback device (usually <code>lo</code>) you need to override the used MAC address using <code>--mac-address</code> to receive packets.
Otherwise, the MAC address is <code>00:00:00:00:00:00</code> for both sides and the router drops incoming packets matching its address.</p>
<h2 id="acknowledgement">Acknowledgement</h2>
<p>This demo application has been initially developed as part of a student&rsquo;s project at Hochschule Darmstadt in summer term 2016.
Participating students were in alphabetical order: Sachin Kashyap Bukkambudhi Satyanarayana, Alvita Marina Menezes, Mrunmayi Parchure, Subashini Rajan and Deeksha Venkadari Yogendra.
Since then, <a href="https://github.com/kelunik">@kelunik</a> and <a href="https://github.com/glmax">@glmax</a> have contributed a lot to <em>socktap</em>.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../certify/" class="btn btn-neutral float-left" title="Certify"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../../legal/" class="btn btn-neutral float-right" title="Legal Notice">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/riebl/vanetza" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../certify/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../../legal/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../js/extra.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
